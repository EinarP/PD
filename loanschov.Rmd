---
title: "Generation"
output:
  html_document: default
  word_document: default
---
This is the analysis of loan scheduling mechanisms

## Context

```{r message=FALSE}
# Analysis functions
source('func.R')

# Initialise the analysis sequence
obs <- read.csv('../data/t24mb.csv', stringsAsFactors=FALSE, na.strings='')
lsov <- newsq('Loan scheduling overview', 'obs')

# Initial center candidates
initList <- c('LD.LOANS.AND.DEPOSITS', 'AA.ARRANGEMENT')
lsov <- grow(lsov, initList)
applyLayout(lsov, layout='layout_components')
```

There are too many edges shown and most of them are not particularly useful in this context. Remove these and replace with connections based on record scan

```{r}

# Remove irrelevant centers
keepList <- paste(c(initList, 'CUSTOMER'), collapse='|')
voidList <- grep(keepList, getCenters(lsov)$name, invert=TRUE, value=TRUE)
lsov <- void(lsov, voidList)
lsov

```

## Value date
Add scanned links and divide into two parallel sequences by module

```{r}
# Separate analysis branch for AA
aasch <- void(lsov, 'LD.LOANS.AND.DEPOSITS', name='AA analysis')
aasch <- grow(aasch, 'AA.ARRANGEMENT', ckpt='vdate')

# Separate analysis branch for LD
ldsch <- void(lsov, 'AA.ARRANGEMENT', name='LD analysis')
ldsch <- grow(ldsch, 'LD.LOANS.AND.DEPOSITS', ckpt='vdate')

# After checking source tables remove irrelevant entities
keepList <- c('LD.LOANS.AND.DEPOSITS', 'LD.SCHEDULE.DEFINE', 'STMT.ENTRY')
ldsch <- void(ldsch, !(getCenters(ldsch)$name %in% c(keepList, 'CUSTOMER')))
ldsch

aasch
```

## Maturity date

## Archival

What can we conclude based on analysis (or in word only?)

